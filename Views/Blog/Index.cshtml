@model IEnumerable<InsaatFirmasi.Models.BlogPost>
@{
    ViewData["Title"] = "Blog";
    ViewData["Description"] = "Plastik inşaat çözümleri, drenaj ve ıslak zemin ürünleri hakkında güncel yazılar ve içerikler.";
    ViewData["Keywords"] = "blog, drenaj, rögar, ıslak zemin, plastik inşaat çözümleri";
}

<!-- SAYFA HERO -->
<section class="page-hero page-hero-simple">
    <div class="container-xl text-center">
        <h1 class="page-hero-title">Blog</h1>
    </div>
</section>

<!-- BLOG KARTLARI -->
<section class="home-section product-groups-section">
    <div class="container-xl">
        <div class="home-section-header">
            <span class="home-section-kicker">Blog Yazıları</span>
            <h2 class="home-section-title">Veritabanından gelen yazılar</h2>
            <p class="home-section-text">
                Aşağıdaki liste MySQL veritabanındaki blog yazıları üzerinden oluşturulmaktadır. Yeni yazılar eklendikçe
                burada otomatik olarak görünecek.
            </p>
        </div>

        @if (Model != null && Model.Any())
        {
            <div class="row g-4">
                @foreach (var post in Model)
                {
                    <div class="col-lg-4 col-md-6">
                        <article class="card h-100 border-0 shadow-sm blog-card">
                            <div class="home-card-media">
                                @if (!string.IsNullOrEmpty(post.ImagePath))
                                {
                                    <img src="~/@post.ImagePath"
                                         alt="@post.Title" />
                                }
                                else if (!string.IsNullOrEmpty(post.ImageUrl))
                                {
                                    <img src="@post.ImageUrl"
                                         alt="@post.Title" />
                                }
                                else
                                {
                                    <div class="home-card-placeholder">
                                        <i class="fas fa-newspaper"></i>
                                    </div>
                                }
                            </div>
                            <div class="card-body d-flex flex-column">
                                <small class="home-card-date">
                                    <i class="fas fa-calendar-alt me-1"></i>
                                    @(post.PublishedDate?.ToString("dd MMMM yyyy", new System.Globalization.CultureInfo("tr-TR")) ?? post.CreatedDate.ToString("dd MMMM yyyy", new System.Globalization.CultureInfo("tr-TR")))
                                </small>
                                <h5 class="card-title fw-bold text-dark mb-2">@post.Title</h5>
                                <p class="card-text text-muted flex-grow-1">
                                    @(post.Summary != null && post.Summary.Length > 120 ? post.Summary.Substring(0, 120) + "..." : post.Summary)
                                </p>
                                <div class="mt-auto">
                                    <a href="@Url.Action("Details", "Blog", new { id = post.Id })" class="btn btn-danger btn-sm">
                                        Devamını Oku
                                    </a>
                                </div>
                            </div>
                        </article>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="text-center text-muted py-5">
                <i class="fas fa-newspaper fa-3x mb-3"></i>
                <h4>Henüz blog yazısı eklenmemiş</h4>
                <p>Admin panel üzerinden blog yazıları eklediğinizde burada listelenecektir.</p>
            </div>
        }
    </div>
</section>
